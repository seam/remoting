<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
	<title>Seam Remoting - Model Example</title>
</head>

<body>

  <h1>Seam Remoting - Model Example</h1>
  
  <script type="text/javascript" src="seam/resource/remoting/resource/remote.js"></script>
  <script type="text/javascript" src="seam/resource/remoting/interface.js?org.jboss.seam.remoting.examples.model.Customer"></script>
  
  <script type="text/javascript">    
    //<![CDATA[
    
    Seam.debug = true;
    
    var model = null;
  
    function loadCustomer() {
      var customerId = document.getElementById("customerId").value;
      
      model = new Seam.Model();

      var callback = function(model) { alert(model.getValue("customer").getFirstName()); };
              
      model.addBeanProperty("customer", "org.jboss.seam.remoting.examples.model.CustomerAction", "customer");
      model.fetch(new Seam.Action()
        .setBeanType("org.jboss.seam.remoting.examples.model.CustomerAction")
        .setMethod("editCustomer")
        .addParam(customerId), callback);
    }
    
    function modifyCustomer() {
      model.getValue("customer").setFirstName("bob");
    }
    
    function applyUpdates() {
      var callback = function(model) { alert("updates applied"); };
      
      model.applyUpdates(new Seam.Action()
        .setBeanType("org.jboss.seam.remoting.examples.model.CustomerAction")
        .setMethod("saveCustomer"),
        callback);
    }

    // ]]>
  </script> 
  
  <label for="customerId">Customer ID</label><input type="text" id="customerId" value="1"/>
  
  <button onclick="javascript:loadCustomer()">Load customer</button> 
  <button onclick="javascript:modifyCustomer()">Modify customer</button>
  <button onclick="javascript:applyUpdates()">Apply updates</button>


</body>
</html>

